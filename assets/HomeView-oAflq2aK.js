import{_ as S,c as w,a as i,o as n,b as o,d as b,t as h,u as x,e as B,w as E,f as _,g as y,h as t,i as g,r as k,F as I,j as N,k as D,l as f,E as G}from"./index-BvDZGiXJ.js";import{u as H}from"./gameStore-B4sM_fRz.js";import{_ as U,a as V,b as R,c as M}from"./treasure-bg-Cj190em7.js";import{S as q}from"./StatusPanel-D7wBwpiy.js";const j="/TreasureHunting/assets/Main%20Interface-C5EuyNnH.png",z="/TreasureHunting/assets/default-icon-DNTcDBJv.png",F={class:"scene-icon"},J=["src","alt"],O={class:"scene-name"},P={key:0,class:"completed-badge"},A={__name:"SceneCard",props:{name:{type:String,required:!0},bg:{type:String,required:!0},description:{type:String,default:""},sceneId:{type:String,required:!0},isUnlocked:{type:Boolean,default:!0},isCompleted:{type:Boolean,default:!1}},setup(r){const l=r,a=w(()=>new URL(Object.assign({"/src/assets/images/Main Interface.png":j,"/src/assets/images/default-icon.png":z,"/src/assets/images/library-bg.png":M,"/src/assets/images/tavern-bg.png":R,"/src/assets/images/temple-bg.png":V,"/src/assets/images/treasure-bg.png":U})[`/src/assets/images/${l.bg}`],import.meta.url).href),s=m=>{m.target.src=new URL("/TreasureHunting/assets/default-icon-DNTcDBJv.png",import.meta.url).href};return(m,c)=>(n(),i("div",{class:"scene-card",onClick:c[0]||(c[0]=v=>m.$emit("enter",r.sceneId))},[o("div",F,[o("img",{src:a.value,alt:r.name,class:"icon-img",onError:s},null,40,J)]),o("div",O,h(r.name),1),r.isCompleted?(n(),i("div",P,"已完成")):b("",!0),c[1]||(c[1]=o("div",{class:"click-hint"},"点击进入",-1))]))}},K=S(A,[["__scopeId","data-v-223f915c"]]),Q={class:"home-container"},W={class:"header-bar"},X={class:"user-actions"},Y={key:0},Z={key:1,class:"login-prompt"},ee={key:2,class:"scene-grid"},se={__name:"HomeView",setup(r){const l=D(),a=H(),s=x();B(()=>{s.loadUsers(),s.isLogin&&a.initGame()}),E(()=>s.isLogin,d=>{d&&a.initGame()});const m=d=>{l.push(`/scene/${d}`)},c=()=>{s.logout(),a.resetGame(),l.push("/login")},v=()=>{l.push("/login")},C=()=>{l.push("/ranking")},L=()=>{confirm("确定要重新开始游戏吗？当前进度将被清空！")&&(a.resetGame(),G.success("已重置游戏，开始新的冒险吧！"))},$=d=>({village:"宁静的村庄，藏有古老地图",library:"古老图书馆，有珍贵古籍",tavern:"猎人聚集处，可雇佣帮手",temple:"神秘神庙，守卫森严",cave:"黑暗洞穴，充满未知危险",treasureRoom:"传说中的宝藏所在地",exit:"冒险结束，结算奖励"})[d]||"未知场景";return(d,e)=>{const p=k("el-button"),T=k("el-card");return n(),i("div",Q,[o("div",W,[e[4]||(e[4]=o("h1",{class:"page-title"},"宝藏猎人冒险",-1)),o("div",X,[t(s).isLogin?(n(),i("span",Y,"欢迎，"+h(t(s).username)+"！",1)):b("",!0),t(s).isLogin?(n(),_(p,{key:1,type:"warning",size:"small",onClick:L},{default:g(()=>[...e[0]||(e[0]=[f(" 重新开始 ",-1)])]),_:1})):b("",!0),t(s).isLogin?(n(),_(p,{key:2,type:"text",onClick:c},{default:g(()=>[...e[1]||(e[1]=[f(" 退出登录 ",-1)])]),_:1})):(n(),_(p,{key:3,type:"text",onClick:v},{default:g(()=>[...e[2]||(e[2]=[f(" 登录/注册 ",-1)])]),_:1})),y(p,{type:"primary",size:"small",onClick:C,disabled:!t(s).isLogin},{default:g(()=>[...e[3]||(e[3]=[f(" 排行榜 ",-1)])]),_:1},8,["disabled"])])]),t(s).isLogin?(n(),_(q,{key:0,gold:t(a).gameState.gold,helpers:t(a).gameState.helpers,hasClue:t(a).gameState.hasClue,hasTreasure:t(a).gameState.hasTreasure},null,8,["gold","helpers","hasClue","hasTreasure"])):b("",!0),t(s).isLogin?(n(),i("div",ee,[(n(!0),i(I,null,N(t(a).accessibleScenes,u=>(n(),_(K,{key:u.id,name:u.name,bg:`${u.id}-bg.png`,description:$(u.id),"scene-id":u.id,"is-unlocked":!0,"is-completed":u.completed,onEnter:m},null,8,["name","bg","description","scene-id","is-completed"]))),128))])):(n(),i("div",Z,[y(T,null,{default:g(()=>[e[6]||(e[6]=o("p",null,"请先登录，开始你的寻宝冒险！",-1)),y(p,{type:"primary",onClick:v},{default:g(()=>[...e[5]||(e[5]=[f("立即登录",-1)])]),_:1})]),_:1})]))])}}},ie=S(se,[["__scopeId","data-v-b73888c3"]]);export{ie as default};
